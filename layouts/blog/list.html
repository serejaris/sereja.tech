{{ define "main" }}
{{ if .Params.articles }}
{{/* Topic hub page */}}
<p><a href="/blog/">&larr; Блог</a></p>
<h1>{{ .Title }}</h1>
<p class="intro">{{ .Description }}</p>

{{ .Content }}

<h2>Статьи</h2>
<ul class="posts">
  {{ range .Params.articles }}
    {{ with site.GetPage (printf "/blog/%s" .) }}
    <li>
      <span class="date">{{ .Date.Format "2 Jan 2006" }}</span>
      <a href="{{ .Permalink }}">{{ .Title }}</a>
      {{ with .Description }}<br><span class="intro" style="font-size:13px;">{{ . }}</span>{{ end }}
    </li>
    {{ end }}
  {{ end }}
</ul>

<p style="margin-top:30px;"><a href="/blog/">&larr; Все статьи</a></p>

{{ else }}
{{/* Main blog listing */}}
<p><a href="/">&larr; sereja.tech</a></p>
<p><a href="/about/">Обо мне</a></p>
<h1>Блог</h1>
<p class="intro">{{ .Site.Params.description }}</p>

<p class="subscribe-inline">Подписаться на обновления — <a href="https://t.me/sereja_tech" target="_blank">@sereja_tech</a></p>

{{ with .Site.Taxonomies.tags }}
<div class="tags">
  {{ range .ByCount }}{{ if ge .Count 2 }}<a href="{{ "/tags/" | relURL }}{{ .Term | urlize }}/" class="tag">{{ .Term }} ({{ .Count }})</a>{{ end }}{{ end }}
</div>
{{ end }}

<ul class="posts">
  {{ range .Pages.ByDate.Reverse }}
  {{ if not .Params.articles }}
  <li>
    <span class="date">{{ .Date.Format "2 Jan 2006" }}</span>
    <a href="{{ .Permalink }}">{{ .Title }}</a>
  </li>
  {{ end }}
  {{ end }}
</ul>
{{ end }}
{{ end }}
