---
title: "Claude Code как операционка для марафона: рассылки, сегменты, аналитика"
date: 2026-01-31
description: "Как я управляю 821 пользователем через Claude Code — отменяю рассылки, создаю сегменты на лету, смотрю статистику в TUI"
tags: ["claude-code", "вайбкодинг", "telegram-bot", "автоматизация"]
---

Три дня марафона. 821 пользователь в боте. 47 рассылок, 12 сегментов, 8 кнопок с трекингом.

Я не открывал код ни разу.

## Проблема

Запускаешь инфопродукт — и начинается операционка. Кто кликнул на вебинар? Сколько людей записались на курс? А кто был вчера, но сегодня не пришёл?

Раньше я открывал pgAdmin, писал SQL, копировал ID-шники, вставлял в скрипт рассылки. На одну операцию уходило минут 40.

Или просил разработчика добавить сегмент. Он занят. Жду. Момент упущен.

## Решение

Claude Code на Opus 4.5 знает мой проект. Знает структуру базы, знает как работают рассылки, знает что такое FunnelEvent и как трекаются клики. Я не объясняю это каждый раз — агент помнит контекст.

{{< callout type="insight" >}}
Отмени, пожалуйста, рассылку, которая запланирована на 11 часов, которая будет через 10 минут.
{{< /callout >}}

Агент понял: нашёл pending broadcast в базе, поменял статус на cancelled. Готово.

{{< callout type="insight" >}}
Какие остались рассылки?
{{< /callout >}}

Получил таблицу в терминале: время, текст, сегмент, статус. Не открывая базу, не открывая админку.

## Как это выглядит на практике

Вот реальный поток за один день марафона:

```
┌─────────────────────────────────────────────────────────────────────┐
│                    OPERATIONS FLOW (День 2)                        │
└─────────────────────────────────────────────────────────────────────┘

09:00  "какие сегодня рассылки?"
       └─▶ Агент показывает план на день

10:50  "отмени рассылку на 11"
       └─▶ Агент отменяет, подтверждает

11:30  "надо отправить гайд тем кто был на втором вебинаре"
       └─▶ Агент: "это новый сегмент, создаю..."
       └─▶ Создаёт сегмент clicked_webinar_day2
       └─▶ Отправляет рассылку

14:00  "дай стату по кликам в TUI"
       └─▶ Таблица прямо в терминале:
           │ webinar_click │ 156 │
           │ guide_claim   │ 89  │
           │ course_prereg │ 34  │

17:30  "покажи вчера и сегодня по вебинару"
       └─▶ Сравнительная таблица по дням

21:00  "добавь рассылку для тех у кого нет username"
       └─▶ Агент: "создаю сегмент no_username..."
       └─▶ Добавляет в очередь
```

Каждый из этих промптов — это обычно: открыть код, найти нужный файл, понять логику, написать запрос, протестировать, запустить. Здесь — одно предложение.

## Сегменты на лету

Самое ценное — создание сегментов в реальном времени.

{{< callout type="insight" >}}
Нужно отправить всем кто регался на вебинар, но не повторно тем кому уже отправили.
{{< /callout >}}

Я не думаю про SQL. Не думаю про DISTINCT и LEFT JOIN. Описываю бизнес-логику — агент переводит в запрос.

Или вот реальный edge case. Обнаружил что часть пользователей без Telegram username. Им нельзя написать в личку, но можно отправить broadcast.

{{< callout type="insight" >}}
Добавь сообщение в очередь для тех у кого нет тг имени и кто оставлял заявку.
{{< /callout >}}

Агент создал сегмент `course_apply_no_username`, добавил broadcast. Это заняло секунды. Руками я бы провозился полчаса — и скорее всего забил бы.

## Аналитика в терминале

Не люблю дашборды. Они требуют: открыть браузер, залогиниться, найти нужный отчёт, разобраться в фильтрах.

Claude Code даёт статистику прямо в терминале:

{{< callout type="insight" >}}
Дай стату по кликам по TUI.
{{< /callout >}}

Получаю ASCII-таблицу с метриками. Прямо там где работаю.

{{< callout type="insight" >}}
Покажи данные по тем, кто взаимодействовал с кнопками, связанными с вебинаром — все сегменты, сколько и кто.
{{< /callout >}}

Агент делает несколько запросов, агрегирует, показывает breakdown по сегментам. Я вижу картину за секунды.

## Контроль и безопасность

Когда работаешь с живой базой, хочется понимать что происходит.

{{< callout type="insight" >}}
Источники вообще не переписываются же в базе?
{{< /callout >}}

Агент проверил логику, показал что source записывается один раз при регистрации.

{{< callout type="insight" >}}
Как я могу проверить что ничего никто не изменяет в базу вручную?
{{< /callout >}}

Агент предложил audit trigger. Я согласился — он добавил. Теперь все изменения логируются.

По-моему, главное здесь — скорость. Агент быстрее находит информацию и предлагает решения. Мне остаётся сказать "да" или "нет".

## Почему это работает

**CLAUDE.md как база знаний.** В этом файле описана архитектура: таблицы, поля, логика broadcasts. Агент не спрашивает "а где база?" — он уже знает.

**Агент учится на моих запросах.** К третьему дню марафона я заметил: когда говорю "стата по вебинару" — агент сразу показывает нужные метрики. Без уточнений.

**Диалог вместо кода.** Результат не тот? Уточняю в следующем промпте. "А ещё добавь breakdown по дням" — готово.

## Что дальше

Раньше автоматизация для меня — написать код один раз, запустить много раз. Теперь — объяснить агенту что нужно, получить результат.

Хочу попробовать:
- Голосовой ввод через TTS hook — буквально рассылки голосом
- Skill для типовых операций — "утренняя стата", "план рассылок на день"

821 пользователь — первый тест. Следующий запуск покажет как это масштабируется.

## Источники

- [Agentic AI Trends 2026](https://www.cloudkeeper.com/insights/blog/top-agentic-ai-trends-watch-2026-how-ai-agents-are-redefining-enterprise-automation) — CloudKeeper о том как AI-агенты переопределяют автоматизацию
- [Build AI Workflows with Claude Code](https://www.producttalk.org/how-to-build-ai-workflows-with-claude-code/) — Product Talk о воркфлоу с Claude Code
- [Awesome Claude Code](https://github.com/hesreallyhim/awesome-claude-code) — коллекция skills и hooks для Claude Code
