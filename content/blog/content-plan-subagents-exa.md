---
title: "Контент-план для канала: от одного поста к субагентам"
date: 2026-02-06
description: "Завёл AI-канал — сначала писал промпт на каждый пост, потом делегировал серию агенту с Exa MCP."
tags: ["claude code", "telegram", "субагенты"]
image: "/images/blog/content-plan-subagents-exa-preview.png"
knowledge:
  problem: "Создание серии постов для канала требует повторяющегося ручного ресёрча для каждого поста"
  solution: "Субагент content-planner с Exa MCP автоматизирует цикл ресёрч-пост по style guide для серий"
  pattern: "subagent-content-pipeline"
  tools: ["Claude Code", "Exa MCP", "Telegram"]
  takeaways:
    - "Паттерн четырёх шагов: руками → правила → заметил повторение → делегировал агенту"
    - "Style guide в .claude/rules/ автоматически подхватывается субагентом без указания в промпте"
    - "Exa MCP deep режим для real-time поиска фактов при генерации контента"
    - "Субагент через Task tool работает в отдельном контексте, не загружая основной"
    - "Серия из 5 постов за вечер вместо пары дней вручную"
  related:
    - slug: "digest-subagents-mapreduce"
      relation: "тот же принцип делегирования субагентам — MapReduce для дайджестов"
    - slug: "slash-commands-subagents"
      relation: "разница между commands и agents — почему субагент лучше"
    - slug: "blog-post-pipeline"
      relation: "пайплайн для статей начинается с тех же правил"
    - slug: "telegram-autoposter"
      relation: "следующий шаг — автопостинг через очередь"
---

Завёл AI-новостной канал @slop_info.

Сначала писал промпт на каждый пост вручную. Через пару недель понял что копипащу одни и те же инструкции — и собрал систему с субагентами и Exa MCP.

## Как начиналось: один пост

Вижу новость про AI — прошу Claude Code написать пост для канала.

{{< callout insight >}}
Напиши пост про новую модель DeepSeek. Тон ироничный, без пафоса. До 500 символов. Для канала про AI-новости.
{{< /callout >}}

Claude выдал текст. Скопировал в Telegram. Работает.

Но каждый раз объяснять тон, лимиты, контекст канала — утомительно. Решил записать правила один раз.

## Style guide: записал правила один раз

Создал файл с голосом канала в `.claude/rules/`. Тон, формат, триггеры — всё в одном месте. Теперь Claude подхватывает голос без пояснений.

```
# @slop_info Style Guide

## Тон
- Ироничный, без пафоса
- Без «революций» и «прорывов»
- Короткие предложения

## Формат
- До 500 символов
- Факты + комментарий

## Триггеры
- Новые модели
- Абсурдные кейсы AI
- Регуляция и политика
```

Промпт упростился до «пост про X». Агент знает голос из правил.

Это работает для разовых постов. Но не масштабируется на серию.

## Проблема: серия требует свежих данных

Захотел сделать серию про регуляцию AI в разных странах. Пять постов — США, ЕС, Китай, Индия, Россия. Каждый нужно ресёрчить отдельно.

Если делать руками: ищу инфу про США → составляю промпт → агент пишет пост. Потом то же самое для ЕС. И ещё три раза.

По-моему, если процесс повторяется больше двух раз — пора делегировать.

## Решение: субагент с Exa MCP

[Exa MCP](https://exa.ai/mcp) — MCP-сервер для поиска в реальном времени. Три режима: `auto` (баланс), `fast` (скорость), `deep` (глубокий ресёрч). Для контент-плана использую `deep` — нужны факты, не скорость.

Создал агента `content-planner`. Он умеет искать через Exa, писать в голосе канала и составлять серию связанных постов.

```
┌─────────────┐
│ Claude Code  │  (я)
└──────┬───────┘
       │ "Серия про регуляцию AI, 5 стран"
       ▼
┌──────────────────┐
│ content-planner  │  субагент
└────────┬─────────┘
         │ Exa MCP для каждой страны
         ▼
    ┌─────────┐
    │ Exa AI  │  real-time поиск
    └────┬────┘
         │ контекст
         ▼
┌──────────────────┐
│ content-planner  │  генерит 5 постов
└────────┬─────────┘
         │
         ▼
┌─────────────┐
│ Claude Code  │  получаю готовую серию
└─────────────┘
```

{{< callout insight >}}
Запусти content-planner. Серия из 5 постов про регуляцию AI: США, ЕС, Китай, Индия, Россия. Для каждой страны найди последние новости через Exa, потом напиши пост по style guide.
{{< /callout >}}

Агент делает пять циклов: поиск → пост. Первую серию собрал за вечер — вручную это заняло бы пару дней.

## Почему субагент, а не команда

Можно было сделать через `/content-plan` команду. Но команды вливаются в основной контекст — весь текст обрабатывает главный Claude вместе с историей чата.

Через Task tool агент работает в отдельном процессе. Ему не надо тащить всю переписку — только style guide и тему. Меньше контекст, дешевле запрос.

Подробнее про разницу commands vs agents писал в [Почему model: в slash-командах — это ловушка](/blog/slash-commands-subagents).

## Style guide как обязательное условие

[AirOps пишет](https://www.airops.com/blog/maintain-brand-voice-ai-content) что голос бренда — обязательное условие для AI-контента. Без него каждый пост звучит по-разному. Шаблоны уменьшают разброс в стиле.

У меня style guide лежит в `.claude/rules/` — субагент видит его автоматически. Я проверил: когда забыл указать style guide в одном из промптов, пост вышел в другом тоне. Подписчики не заметили, но я видел разницу.

[Averi.ai](https://www.averi.ai/how-to/ai-content-that-doesn-t-sound-like-ai-the-brand-voice-system-that-actually-works) сравнивает это с тостом на свадьбе: попросить незнакомца — технически напишет, но голос будет не твой.

Похожий подход к системной генерации контента описывал в [Пайплайн для статей](/blog/blog-post-pipeline) — там тоже всё начинается с правил, а потом делегируется агентам.

## Когда это работает

Субагент с Exa MCP полезен когда:
- Нужна серия постов на связанные темы
- Каждый пост требует свежей информации
- Процесс повторяется: ресёрч → пост, ресёрч → пост
- Есть style guide, который агент переиспользует

Не нужен когда:
- Пишешь один пост — проще руками
- Информация статична, ресёрч не требуется
- Каждый пост уникален, паттерна нет

## От ручного промпта к системе

```
РУЧНОЙ ПРОМПТ          STYLE GUIDE            СУБАГЕНТ
┌────────────┐     ┌────────────────┐     ┌────────────────┐
│ "напиши    │     │ .claude/rules/ │     │ content-planner│
│  пост про  │ ──▶ │ + "пост про X" │ ──▶ │ + Exa MCP      │
│  X, тон Y, │     │                │     │ + style guide   │
│  лимит Z"  │     │ тон/формат     │     │ + серия постов  │
└────────────┘     │ запомнил       │     └────────────────┘
                   └────────────────┘
   1 пост/раз         1 пост/раз           5 постов/раз
```

Паттерн из четырёх шагов:

1. **Сделал один раз руками.** Понял как пишется пост для канала.
2. **Записал правила.** Style guide — теперь не объясняю тон каждый раз.
3. **Заметил повторение.** Ресёрч → пост, ресёрч → пост — процесс одинаковый.
4. **Делегировал агенту.** Субагент ищет через Exa MCP и пишет по правилам.

Не наоборот.

{{< callout warning >}}
Не начинай с автоматизации. Если сразу собрать систему с субагентами — не поймёшь где она ломается. Сначала руками, потом масштабируешь.
{{< /callout >}}

Тот же подход с делегированием от ручного к автоматическому использую для [дайджестов чатов](/blog/digest-subagents-mapreduce) — там MapReduce через субагенты, но принцип тот же: сначала руками, потом паттерн, потом агент.

## Что дальше

Сейчас агент генерит серию, я копирую вручную. Следующий шаг — [автопостинг через очередь](/blog/telegram-autoposter). Генерация + публикация в одном пайплайне.

Субагенты нужны не сразу. Они нужны когда процесс стабилизировался и ты уже понял что работает.
