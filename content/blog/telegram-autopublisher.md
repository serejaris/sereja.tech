---
title: "Мой редотдел из трёх промптов"
date: 2026-02-12
description: "За одну сессию Claude Code собрал редотдел: стиль канала, 9 постов на неделю, автопубликация в 8:00. Три промпта — канал на автопилоте."
tags: ["claude code", "telegram", "автоматизация"]
image: "/images/blog/telegram-autopublisher-preview.png"
knowledge:
  problem: "Ежедневная публикация в Telegram-канал отнимает время и требует дисциплины"
  solution: "Три промпта Claude Code создают стиль-промпт, генерируют посты на неделю и настраивают автопубликацию через планировщик macOS"
  pattern: "style-prompt-content-pipeline"
  tools: ["Claude Code", "Telegram Bot API", "macOS launchd"]
  takeaways:
    - "Стиль-промпт на основе 20 реальных постов делает генерацию неотличимой от авторской"
    - "9 постов на неделю генерируются за одну сессию, 7 из 9 идут без правок"
    - "Планировщик macOS запускает пропущенные задачи при пробуждении, в отличие от cron"
    - "Весь скрипт публикации — 28 строк bash"
    - "Подготовка контента на неделю занимает 20-30 минут в воскресенье"
  related:
    - slug: "telegram-autoposter"
      relation: "предыдущая версия автопубликации для другого канала"
    - slug: "claude-code-marketing-ops"
      relation: "управление рассылками как следующий уровень автоматизации"
---

Постить в Telegram каждый день — рутина. Забыл, устал, не до того. За одну сессию в Claude Code я собрал себе редотдел — систему, которая генерирует посты в моём стиле и публикует их сама.

Редотдел — как отдел в персональной корпорации. Только вместо редакторов и копирайтеров — агент и три промпта. Канал @riswrk выходит каждое утро в 8:00. Я не открываю Telegram, не копирую текст, не нажимаю «отправить». Посты лежат в очереди с датами, планировщик macOS забирает нужный файл и отправляет через Bot API.

## Проблема: контент есть, дисциплины нет

У меня есть что сказать. Темы, наблюдения, комментарии к новостям — голова полна. Но между «хочу написать» и «написал и опубликовал» стоит рутина. Открыть Telegram, сформулировать мысль, отформатировать, нажать кнопку. Каждый день. Без выходных.

Первую неделю держишься на энтузиазме. Вторую — на дисциплине. Третью — пропускаешь «один разок». Я ловил себя на этом не раз — открываю канал, а там пауза в три дня.

У меня уже был [очередь постов для блога на Claude Code](/blog/telegram-autoposter/) для @sereja_tech. Но там другая история — длинные статьи, другой ритм. Для @riswrk нужна своя система: короткие ежедневные посты с характерным стилем. И главная сложность — этот стиль нельзя описать словами «ну, пиши как я». Агенту нужна чёткая инструкция.

## Решение: три промпта и одна сессия

Вся система собралась за одну сессию в Claude Code. Три этапа: описать стиль, нагенерировать посты, настроить автопубликацию.

### Этап 1. Стиль-промпт — научить агента писать «как я»

Любой, кто пробовал просить AI «напиши пост для моего канала», знает результат. Получается шаблонный текст, который не похож ни на что. Потому что агент не знает, как именно ты пишешь.

Идея простая — дать агенту реальные примеры и попросить описать стиль. Не «напиши как я», а «проанализируй и формализуй».

Я скопировал 20 последних постов канала и скормил агенту с таким промптом:

{{< callout type="insight" >}}
Вот 20 последних постов моего Telegram-канала @riswrk. Проанализируй стиль: тональность, лексику, синтаксис, форматирование, характерные приёмы. Напиши описание стиля в markdown — так, чтобы другой агент мог писать посты в этом стиле.
{{< /callout >}}

Агент на Claude Opus 4.6 выдал подробный документ: тональность («неформальный, но профессиональный»), лексика («смешение высокого стиля с IT-жаргоном и англицизмами»), синтаксис («авторское тире, антитеза, рваный ритм»), форматирование («абзацы по 1-3 предложения, минимум эмодзи»). Даже поймал humblebrag — «скромное хвастовство через благодарность».

Этот файл стал ядром всей системы. Без него — шаблонные тексты. С ним — посты, которые звучат как мои.

### Этап 2. Генерация постов на неделю

Дальше — контент-план. Я собрал 9 тем на неделю: новости AI-индустрии, запуски моделей, тренды. Темы с контекстом — не просто «напиши про Opus 4.6», а абзац с фактами, цифрами, позицией.

Промпт для генерации:

{{< callout type="insight" >}}
Вот темы на неделю [список тем]. Вот описание стиля канала [ссылка на файл]. Напиши 9 постов для Telegram-канала в этом стиле. Каждый пост — отдельным файлом в папку queue/ с именем по дате публикации. Формат HTML для Telegram.
{{< /callout >}}

Агент на Claude Opus 4.6 создал 9 файлов: `2026-02-13.txt`, `2026-02-14.txt` и так далее до `2026-02-21.txt`. Каждый — готовый пост в HTML-разметке для Telegram.

Почему HTML, а не Markdown? Telegram поддерживает оба формата, но HTML надёжнее. Markdown в Telegram — свой диалект, где подчёркивания конфликтуют с URL, а вложенное форматирование ломается. HTML парсится предсказуемо.

Один проход — контент на 9 дней вперёд. Иногда агент переусложняет, накидывает лишних деталей — убираю половину, оставляю суть. Но обычно 7 из 9 идут без правок.

### Этап 3. Автопубликация — планировщик + Bot API

Посты лежат в очереди. Осталось научить компьютер отправлять их вовремя.

{{< callout type="insight" >}}
Сделай автопубликацию постов в Telegram-канал. Посты лежат в папке queue/ — файлы названы по дате (2026-02-13.txt). Каждый день в 8 утра скрипт должен: взять файл с сегодняшней датой, отправить через Bot API, переместить в published/. На маке, без Docker.
{{< /callout >}}

Агент на Claude Opus 4.6 создал скрипт публикации и конфиг планировщика. Скрипт простой: берёт файл с сегодняшней датой, отправляет текст в канал, перемещает в архив. Планировщик macOS запускает его каждый день в 8:00.

Почему планировщик macOS, а не cron? Он умеет запускать пропущенные задачи. Ноутбук спал в 8:00 — задача выполнится при пробуждении. Cron пропустит и не вспомнит. Для ежедневной публикации разница принципиальная.

Весь поток выглядит так:

```
  Темы на неделю        Стиль канала
       │                     │
       └────────┬────────────┘
                │
                ▼
    ┌───────────────────────┐
    │  Claude Code: генерация│
    │  9 постов (queue/)     │
    └───────────┬───────────┘
                │
                ▼
    ┌───────────────────────┐
    │  queue/                │
    │  2026-02-13.txt        │
    │  2026-02-14.txt        │
    │  ...                   │
    └───────────┬───────────┘
                │  каждый день 8:00
                ▼
    ┌───────────────────────┐
    │  publish.sh            │
    │  → Bot API sendMessage │
    └───────────┬───────────┘
                │
          ┌─────┴─────┐
          ▼           ▼
    published/    @riswrk
    (архив)       (канал)
```

## Что получилось

Редотдел состоит из трёх частей: описание стиля (чтобы агент знал как писать), очередь постов (файлы с датами) и механизм отправки. Плюс токен бота в переменных окружения. Всё лежит в одной папке — отдел готов к работе.

Воскресенье вечером: описываю темы на неделю, прошу агента сгенерировать посты, проверяю результат. Минут двадцать-тридцать. После этого канал живёт сам до следующего воскресенья.

Первый пост ушёл автоматически 12 февраля. Я был в другой комнате, не трогал ничего. Открыл Telegram — пост уже в канале. Непривычное ощущение. На следующий день — первый настоящий пост про гонку Opus 4.6 vs GPT-5.3-Codex. Тоже сам.

Никакого сервера. Никакого Docker. Просто папка с файлами на ноутбуке, которая каждое утро отправляет один текст в Telegram.

## Альтернативы: почему не n8n, Make или GitHub Actions

Перед тем как просить агента писать скрипт, посмотрел что есть готового.

**GitHub Actions + cron** — бесплатно, 2000 минут в месяц. Есть готовый `appleboy/telegram-action`. Плюс: работает без локальной машины, посты можно хранить в репозитории. Минус: overkill для отправки одного текстового файла в день. Плюс нужно хранить токены в GitHub Secrets.

**n8n (self-hosted)** — визуальный builder воркфлоу, 400+ интеграций. Если бы мне нужно было собирать контент из RSS, обрабатывать и постить — взял бы n8n. Для «отправь файл из папки» — перебор.

**Make (ex-Integromat)** — облачный no-code, от $9/мес. Удобный, но платный. И зависимость от стороннего сервиса для задачи, которая решается одним скриптом.

**Buffer** — не поддерживает Telegram. Отпадает сразу.

Мой выбор — bash + планировщик macOS — самое простое решение. Нет зависимостей, нет подписок, нет серверов. Скрипт на 28 строк и конфиг планировщика. Если сломается — починить сможет любой, кто умеет читать.

Единственный минус: привязка к локальной машине. Если ноутбук выключен весь день — пост не уйдёт. Для меня это не проблема: макбук всегда включён. Если бы был параноиком — перенёс бы на GitHub Actions за 10 минут.

## Частые вопросы

### Можно ли адаптировать для своего канала?

Да. Система не привязана к @riswrk. Замени три вещи: стиль-промпт (скорми агенту свои посты), темы (свои) и токен бота (свой). Структура папок и скрипт — универсальные. Если ведёшь канал про кулинарию — агент проанализирует твой стиль и будет писать про кулинарию.

### Что если забыл подготовить посты и очередь пуста?

Ничего страшного. Скрипт проверяет, есть ли файл с сегодняшней датой. Нет файла — нет публикации, без ошибок. Канал просто молчит один день. Можно попросить агента добавить уведомление в личку, если файл не найден.

### Как добавить картинки или кнопки к постам?

Текущая версия отправляет только текст через `sendMessage`. Для картинок нужен `sendPhoto`, для кнопок — `inline_keyboard` в JSON. Принцип тот же: попросить агента доработать скрипт. Я пока обхожусь текстом — для новостного канала этого достаточно. Если понадобится мультимедиа — это [управление рассылками через Claude Code](/blog/claude-code-marketing-ops/) уровнем выше.

---

Весь редотдел — три промпта и одна папка. Ценность не в коде (его 28 строк), а в подходе: формализовать стиль, нагенерировать контент, автоматизировать доставку. Каждый шаг — один промпт агенту.

Если ведёшь Telegram-канал и устал постить руками — собери себе такой же отдел. Воскресенье вечером, полчаса работы, неделя на автопилоте.
