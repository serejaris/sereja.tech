---
title: "Один источник правды: почему копировать данные в документацию — плохая идея"
date: 2026-01-12
description: "Скопировал информацию о студентах в README.md. Теперь у меня два источника: база данных и файл. Single Source of Truth — принцип, который я нарушил."
tags: ["ssot", "документация"]
section: Документация
knowledge:
  problem: "Копирование данных из базы в документацию приводит к рассинхронизации на 8-й день"
  solution: "Применять принцип Single Source of Truth — ссылаться на источник или генерировать документацию автоматически"
  pattern: "single-source-of-truth"
  tools: ["markdown-autodocs", "mdat", "GitHub Actions"]
  takeaways:
    - "Дублирование данных — вопрос не 'если', а 'когда' рассинхронизируются"
    - "Три стратегии: не дублировать, ссылаться на источник, генерировать автоматически"
    - "DRY применяется не только к коду, но и к документации"
    - "markdown-autodocs и mdat автоматизируют обновление секций в README"
  metrics:
    days_until_desync: 8
---

Скопировал список студентов из базы в README.md.

На восьмой день данные разъехались.

## Что случилось

У меня платформа для курсов. Студенты — в SQLite: имена, цели, прогресс.

Решил сделать README в папке когорты. Скопировал туда имена и цели. Открываешь папку — сразу видно кто есть кто. Красота.

Потом Аня обновила цели через интерфейс. База обновилась. README — нет.

Два источника. Разные данные. Какой правильный?

{{< callout warning "Дублирование = рассинхронизация" >}}
Не вопрос "если". Вопрос "когда".
{{< /callout >}}

## Single Source of Truth

Один факт — одно место хранения. Остальные ссылаются или генерируются автоматически.

```
База данных (источник) → README генерируется → актуален
```

Примеры:

- Версия пакета живёт в `package.json`. README её не дублирует.
- API эндпоинты генерируются из кода
- Документация функций — из docstrings

DRY применяют к коду, но к документации тоже работает. Дублирование — это долг. Платить придётся рассинхроном.

## Что делать

**Не дублировать.** Нужна информация — открой базу. Звучит радикально, но работает.

**Ссылаться.** В README пишешь «студенты: см. интерфейс» и даёшь ссылку. Указатель вместо копии.

**Генерировать.** Скрипт читает базу, обновляет README. Или GitHub Action при каждом коммите.

По-моему, второй вариант — самый реальный. Генерация требует поддержки, а "не дублировать" неудобно для быстрого доступа.

## Инструменты для генерации

Если всё-таки выбрал автоматизацию:

**markdown-autodocs** — GitHub Action. Ставишь маркеры, указываешь источник — при коммите секция обновляется.

```html
<!-- AUTO-GENERATED-CONTENT:START (CODE:src=./data.json) -->
<!-- AUTO-GENERATED-CONTENT:END -->
```

**mdat** — CLI для шаблонов. Комментарии превращаются в контент.

**Свой скрипт.** Иногда 15 строк на Python проще универсального инструмента. У меня такой есть для статистики атомов — читает SQLite, пишет markdown.

{{< callout insight >}}
Копируешь данные — автоматизируй. Ручное копирование устаревает к вечеру.
{{< /callout >}}

## Где ещё работает

- **Конфигурация** — env-переменные в одном `.env`, не разбросаны
- **API-документация** — из OpenAPI схемы, не вручную
- **Дизайн-токены** — цвета в одном файле, компоненты импортируют

В корпорациях это Data Governance. В маленьких проектах — просто не плодить копии.

## Что я сделал

README удалил. Вместо него — ссылка на интерфейс.

Если понадобится красивый обзор в markdown — напишу скрипт. Но пока ссылки хватит.

## Источники

- [Atlassian: Building a Single Source of Truth](https://atlassian.com/work-management/knowledge-sharing/documentation/building-a-single-source-of-truth-ssot-for-your-team)
- [ThoughtSpot: Single Source of Truth — What It Is and Why It Matters](https://www.thoughtspot.com/data-trends/best-practices/single-source-of-truth)
- [markdown-autodocs — GitHub Action для автогенерации](https://github.com/dineshsonachalam/markdown-autodocs)
- [mdat — Markdown Autophagic Templates](https://github.com/kitschpatrol/mdat)
- [The Case Against Code Comments: Why DRY applies to more than just code](https://levelup.gitconnected.com/the-case-against-code-comments-11f105aec37f)
