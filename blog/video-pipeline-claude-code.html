<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Видео-пайплайн на Claude Code: от записи до YouTube за один промпт | Сережа Рис</title>

  <!-- SEO -->
  <meta name="description" content="Как я автоматизировал публикацию видео: субтитры через Whisper, слайды глав, превью, загрузка на YouTube и HTML-страница урока. Всё делают агенты.">
  <meta name="author" content="Сережа Рис">
  <meta name="keywords" content="Claude Code, видео пайплайн, YouTube автоматизация, Whisper субтитры, ffmpeg, вайбкодинг">
  <link rel="canonical" href="https://sereja.tech/blog/video-pipeline-claude-code">

  <!-- Open Graph -->
  <meta property="og:title" content="Видео-пайплайн на Claude Code: от записи до YouTube за один промпт">
  <meta property="og:description" content="Автоматизация публикации видео: субтитры, слайды глав, превью, загрузка — всё делают агенты.">
  <meta property="og:type" content="article">
  <meta property="og:locale" content="ru_RU">
  <meta property="og:url" content="https://sereja.tech/blog/video-pipeline-claude-code">
  <meta property="og:site_name" content="Сережа Рис">
  <meta property="article:author" content="Сережа Рис">
  <meta property="article:published_time" content="2026-01-14T00:00:00+00:00">
  <meta property="article:section" content="Claude Code">
  <meta property="article:tag" content="Claude Code">
  <meta property="article:tag" content="видео">
  <meta property="article:tag" content="автоматизация">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Видео-пайплайн на Claude Code">
  <meta name="twitter:description" content="От записи до YouTube за один промпт. Агенты делают рутину.">
  <meta name="twitter:creator" content="@riiiiiiiiss">

  <!-- JSON-LD Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "Видео-пайплайн на Claude Code: от записи до YouTube за один промпт",
    "description": "Как автоматизировать публикацию видео: субтитры, слайды глав, превью, загрузка на YouTube.",
    "author": {
      "@type": "Person",
      "name": "Сережа Рис",
      "url": "https://sereja.tech"
    },
    "publisher": {
      "@type": "Person",
      "name": "Сережа Рис",
      "url": "https://sereja.tech"
    },
    "datePublished": "2026-01-14",
    "dateModified": "2026-01-14",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://sereja.tech/blog/video-pipeline-claude-code"
    },
    "wordCount": 900,
    "articleSection": "Claude Code",
    "keywords": ["Claude Code", "видео пайплайн", "YouTube", "автоматизация", "Whisper"],
    "inLanguage": "ru-RU"
  }
  </script>

  <link href="https://unpkg.com/prismjs@1.29.0/themes/prism.css" rel="stylesheet">
  <style>
    body {
      font-family: monospace;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
      background: #fff;
      color: #000;
    }
    a { color: #0000EE; text-decoration: underline; }
    a:visited { color: #551A8B; }
    h1 { font-size: 24px; margin-bottom: 8px; line-height: 1.3; }
    h2 { font-size: 18px; margin-top: 30px; margin-bottom: 10px; }
    p { margin-bottom: 15px; }
    .author { color: #666; font-size: 13px; margin-bottom: 24px; }
    .intro { color: #666; margin-bottom: 8px; }
    .intro:last-of-type { margin-bottom: 24px; }

    .callout {
      border: 1px solid #000;
      padding: 12px 16px;
      margin: 20px 0;
    }
    .callout.warning { border-left: 3px solid #c00; }
    .callout.insight { border-left: 3px solid #060; }
    .callout strong { display: block; margin-bottom: 4px; }
    .callout p { margin-bottom: 0; }

    pre {
      background: #f8f8f8;
      border: 2px solid #000;
      padding: 16px;
      overflow-x: auto;
      font-size: 13px;
      line-height: 1.5;
      margin: 24px 0;
    }
    code { font-family: monospace; background: #eee; padding: 1px 4px; }
    pre code { background: none; padding: 0; }

    .ascii {
      font-family: monospace;
      font-size: 12px;
      background: #fff;
      padding: 16px;
      margin: 24px 0;
      text-align: left;
      border: 2px solid #000;
      white-space: pre;
      overflow-x: auto;
    }

    ul, ol { margin: 12px 0; padding: 0 0 0 1.2em; }
    li { margin-bottom: 4px; }

    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    th, td { border: 1px solid #000; padding: 8px; text-align: left; font-size: 13px; }
    th { background: #f5f5f5; }

    .sources { margin-top: 40px; padding-top: 20px; border-top: 1px solid #000; }
    .sources h3 { font-size: 14px; margin-bottom: 8px; }
    .sources ul { list-style: none; padding: 0; }
    .sources li { margin-bottom: 4px; }

    footer { margin-top: 30px; text-align: center; font-size: 13px; color: #666; }
  </style>
</head>
<body>
  <p><a href="/blog/">&larr; Блог</a></p>
  <article>
    <h1>Видео-пайплайн на Claude Code: от записи до YouTube за один промпт</h1>
    <p class="author">Сережа Рис · 14 января 2026</p>

    <p class="intro">Вчера записал двухчасовой воркшоп. Впереди рутина: субтитры, таймкоды, превью, загрузка.</p>
    <p class="intro">Раньше на это уходило полдня — час на правку субтитров, ещё час на таймкоды и остаток на мелочи.</p>
    <p class="intro">Теперь говорю «опубликуй видео» — и иду пить кофе.</p>

    <h2>Проблема</h2>

    <p>После каждого занятия один и тот же список дел. Транскрибировать аудио. Разметить главы. Сделать превью. Написать описание с таймкодами. Загрузить на YouTube. Собрать страницу урока для студентов.</p>

    <p>Шесть шагов. Каждый требует отдельного инструмента. Whisper для субтитров, ffmpeg для нарезки, Playwright для рендера превью, youtubeuploader для загрузки. И везде свои флаги, свои форматы, свои подводные камни.</p>

    <p>Я не хочу это помнить. Агенты помнят.</p>

    <h2>Архитектура</h2>

    <p>Пайплайн состоит из шести скиллов. Каждый делает одну задачу и передаёт результат следующему.</p>

    <div class="ascii">Запись.mp4
    │
    ▼
┌─────────────────────┐
│  subtitle-generator │  MLX Whisper → SRT/VTT
└─────────────────────┘
    │
    ▼
┌─────────────────────┐
│  yt-metadata-gen    │  Таймкоды + описание
└─────────────────────┘
    │
    ▼
┌─────────────────────┐
│  chapter-slides     │  PNG-заставки для глав
└─────────────────────┘
    │
    ▼
┌─────────────────────┐
│  thumbnail-gen      │  HTML → PNG превью
└─────────────────────┘
    │
    ▼
┌─────────────────────┐
│  youtube-upload     │  youtubeuploader CLI
└─────────────────────┘
    │
    ▼
┌─────────────────────┐
│  video-lesson-page  │  HTML страница урока
└─────────────────────┘</div>

    <p>Оркестратор — скилл <code>mentor-video-publish</code>. Запускает цепочку и следит за выполнением. Сам код не пишу — Claude Code сгенерировал всё по спеке.</p>

    <h2>Что происходит внутри</h2>

    <p>Начинается с <strong>субтитров</strong>: MLX Whisper на Apple Silicon транскрибирует двухчасовое видео за 10-15 минут.</p>

    <p>Дальше <strong>метадата</strong>. Агент парсит субтитры, находит смысловые блоки, генерирует таймкоды и описание для YouTube. Это работа для LLM — я только проверяю результат.</p>

    <p>А вот <strong>слайды глав</strong> — самое интересное. Playwright рендерит HTML-шаблон в PNG для каждой главы, потом ffmpeg вставляет эти заставки перед соответствующими сегментами видео.</p>

    <div class="callout insight">
      <strong>Зачем слайды глав</strong>
      <p>YouTube показывает превью при наведении на таймлайн. Если перед каждой главой стоит заставка с названием — зритель сразу видит структуру. Плюс это выглядит профессионально.</p>
    </div>

    <p><strong>Превью</strong> — просто HTML-шаблон с заголовком. Playwright делает скриншот 1280x720, никакого Фотошопа.</p>

    <p>Для <strong>загрузки</strong> использую <code>youtubeuploader</code> — CLI-утилита принимает видео, метадату в JSON и превью.</p>

    <p>В конце генерируется <strong>страница урока</strong>: HTML с вкладками для видео, конспекта, заданий и материалов.</p>

    <h2>Практический пример</h2>

    <p>Вчерашний воркшоп. Два часа записи, 26 глав.</p>

    <table>
      <tr><th>Этап</th><th>Время</th></tr>
      <tr><td>Субтитры</td><td>12 мин</td></tr>
      <tr><td>Метадата</td><td>30 сек</td></tr>
      <tr><td>Слайды (26 шт)</td><td>53 сек</td></tr>
      <tr><td>Сборка видео</td><td>14 мин</td></tr>
      <tr><td>Превью</td><td>2 сек</td></tr>
      <tr><td>Загрузка (1.8 ГБ)</td><td>2 мин 40 сек</td></tr>
      <tr><td>Страница урока</td><td>мгновенно</td></tr>
    </table>

    <p>Итого: около 30 минут. Из них моего участия — минута на запуск и проверку результата. Остальное делают агенты в фоне.</p>

    <h2>Структура файлов</h2>

    <p>Каждая сессия живёт в своей папке:</p>

<pre><code>sessions/session-20260113_182000/
├── source.mp4           # исходник
├── subtitles.srt        # субтитры
├── subtitles.vtt
├── metadata.json        # таймкоды, описание
├── thumbnail.png        # превью
├── slides/              # заставки глав
│   ├── slide-00.png
│   └── ...
├── video_with_slides.mp4  # финальное видео
└── lesson-page.html     # страница урока</code></pre>

    <p>Чистая структура — ничего не теряется, можно откатиться к любому этапу.</p>

    <h2>Что нужно для запуска</h2>

    <ul>
      <li><code>mlx-whisper</code> — транскрипция на Apple Silicon</li>
      <li><code>ffmpeg</code> — нарезка и сборка видео</li>
      <li><code>playwright</code> — рендер HTML в PNG</li>
      <li><code>youtubeuploader</code> — CLI для YouTube API</li>
      <li>Claude Code с Opus 4.5 — оркестрация</li>
    </ul>

    <p>Всё ставится через Homebrew и pip. OAuth для YouTube настраивается один раз.</p>

    <h2>Ограничения</h2>

    <p>Пайплайн заточен под мой воркфлоу. Шаблоны превью и страниц — под мой стиль. Если нужен другой дизайн — придётся менять HTML.</p>

    <p>Whisper ошибается в терминах — вчера написал «Claude Coat» вместо «Claude Code». Есть скилл <code>subtitle-term-fixer</code> с глоссарием, но ручная проверка остаётся обязательной.</p>

    <p>YouTube API имеет квоту: около 6 загрузок в сутки на стандартном лимите. Для большинства это не проблема.</p>

    <h2>Главный вывод</h2>

    <p>Видеопродакшн — это последовательность детерминированных шагов. Идеальная задача для автоматизации. Агенты справляются лучше меня, потому что не забывают флаги ffmpeg и не путают форматы таймкодов.</p>

    <p>Я описываю что хочу получить. Код пишет Claude Code. Рутину выполняют скиллы.</p>

    <p>Вайбкодинг в чистом виде.</p>

    <div class="sources">
      <h3>Источники</h3>
      <ul>
        <li><a href="https://github.com/porjo/youtubeuploader" target="_blank">youtubeuploader</a> — CLI для загрузки на YouTube</li>
        <li><a href="https://github.com/openai/whisper" target="_blank">OpenAI Whisper</a> — модель для транскрипции</li>
        <li><a href="https://www.phoronix.com/news/FFmpeg-Lands-Whisper" target="_blank">FFmpeg 8.0 + Whisper</a> — нативная интеграция</li>
        <li><a href="https://news.ycombinator.com/item?id=46457050" target="_blank">HN: Video pipeline with Claude Code</a> — похожий подход</li>
      </ul>
    </div>

    <footer>
      Январь 2026
    </footer>
  </article>
  <script defer src="/_vercel/insights/script.js"></script>
  <script src="/blog/analytics.js"></script>
</body>
</html>
